@page "/newsviewer/{NewsID}"
@using StellumbraSite.Shared.Model

@inject HttpClient Http

<PageTitle>News Viewer</PageTitle>

@if (news == null)
{
    <p>Loading...</p>
}
else
{
    <div class="news-viewer-background">
        <div class="news-viewer">

            <h2 class="dos-font">@news.Title</h2>
            <p class="dos-font"><em>@news.DateTime.ToString()</em></p>
            @firstThreadOfPost.Content
        </div>
    </div>
}

@code {
    [Parameter]
    public string NewsID { get; set; }
    private NewsItem news;
    private ForumThread firstThreadOfPost;

    protected override async Task OnInitializedAsync()
    {
        news = await Http.GetFromJsonAsync<NewsItem>($"/api/News/GetNewsById/{NewsID}");
        firstThreadOfPost = await Http.GetFromJsonAsync<ForumThread>($"/api/Thread/GetFirstThread/{news.PostId}");
    }
}